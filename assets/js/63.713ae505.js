(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{634:function(t,s,a){"use strict";a.r(s);var n=a(13),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",[t._v("åˆå†™äº†åŠå¹´ "),a("code",[t._v("Vue")]),t._v("... æ— æ¯”æ€€å¿µå†™ "),a("code",[t._v("React")]),t._v(" æ—¶å€™ ğŸ˜­")]),t._v(" "),a("p",[t._v("æ‰€ä»¥è¿™ä¸ªæœˆæ˜¯ "),a("code",[t._v("React")]),t._v(" ä¸“é¢˜ ğŸ¶")])]),t._v(" "),a("h3",{attrs:{id:"react16-8-çš„ç”Ÿå‘½å‘¨æœŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react16-8-çš„ç”Ÿå‘½å‘¨æœŸ"}},[t._v("#")]),t._v(" React16.8+ çš„ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/3/5/1694ce0b5f258496~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"ç”Ÿå‘½å‘¨æœŸå›¾"}})]),t._v(" "),a("ul",[a("li",[t._v("åˆ›å»ºé˜¶æ®µ\n"),a("ul",[a("li",[t._v("constructor")]),t._v(" "),a("li",[t._v("getDerivedStateFromProps")]),t._v(" "),a("li",[t._v("render")]),t._v(" "),a("li",[t._v("componentDidMount")])])]),t._v(" "),a("li",[t._v("æ›´æ–°é˜¶æ®µ\n"),a("ul",[a("li",[t._v("getDerivedStateFromProps")]),t._v(" "),a("li",[t._v("shouldComponentUpdate")]),t._v(" "),a("li",[t._v("render")]),t._v(" "),a("li",[t._v("getSnapshotBeforeUpdate")]),t._v(" "),a("li",[t._v("componentDidUpdate")])])]),t._v(" "),a("li",[t._v("å¸è½½é˜¶æ®µ\n"),a("ul",[a("li",[t._v("componentWillUnmount")])])])]),t._v(" "),a("p",[a("strong",[t._v("hooks æ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸ")])]),t._v(" "),a("ul",[a("li",[t._v("constructor => useState")]),t._v(" "),a("li",[t._v("componentDidMount => useLayoutEffect")]),t._v(" "),a("li",[t._v("shouldComponentUpdate => React.memo() (ä¸æ˜¯hooks)")]),t._v(" "),a("li",[t._v("componentDidUpdate => useEffect + useRef")]),t._v(" "),a("li",[t._v("componentWillUnmount => useEffect")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// constructor")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useLayoutEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// useLayoutEffect ä¸ componentDidMountã€componentDidUpdate çš„è°ƒç”¨é˜¶æ®µæ˜¯ä¸€æ ·çš„ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½†æ˜¯ï¼Œæˆ‘ä»¬æ¨èä½ ä¸€å¼€å§‹å…ˆç”¨ useEffectï¼Œåªæœ‰å½“å®ƒå‡ºé—®é¢˜çš„æ—¶å€™å†å°è¯•ä½¿ç”¨ useLayoutEffect")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mounted "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("mounted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    mounted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// didUpdate")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// componentWillUnmount")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br")])]),a("h3",{attrs:{id:"ç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶åŒºåˆ«"}},[t._v("#")]),t._v(" ç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶åŒºåˆ«")]),t._v(" "),a("ul",[a("li",[t._v("ç¼–å†™å½¢å¼")]),t._v(" "),a("li",[t._v("çŠ¶æ€ç®¡ç†\n"),a("ul",[a("li",[t._v("åœ¨"),a("code",[t._v("hooks")]),t._v("å‡ºæ¥ä¹‹å‰ï¼Œå‡½æ•°ç»„ä»¶å°±æ˜¯æ— çŠ¶æ€ç»„ä»¶ï¼Œä¸èƒ½ä¿ç®¡ç»„ä»¶çš„çŠ¶æ€ï¼Œä¸åƒç±»ç»„ä»¶ä¸­è°ƒç”¨"),a("code",[t._v("setState")])]),t._v(" "),a("li",[t._v("å‡½æ•°å¼ç»„ä»¶é€»è¾‘å¤ç”¨ç®€å•ï¼Œè€Œç±»ç»„ä»¶é€»è¾‘å¤ç”¨å›°éš¾\n"),a("ul",[a("li",[t._v("ç±»ç»„ä»¶çš„é€»è¾‘å¤ç”¨æ–¹æ¡ˆåŒ…æ‹¬"),a("code",[t._v("render props")]),t._v("å’Œ"),a("code",[t._v("HOC")]),t._v("ï¼Œä½†æ˜¯è¿™ç±»æ–¹æ¡ˆéƒ½æ˜¯å°†é€»è¾‘å°è£…åˆ°ä¸€ä¸ªæŠ½è±¡å±‚çš„ç»„ä»¶ä¸­ï¼Œåœ¨ä½¿ç”¨å¤šä¸ªå¤ç”¨é€»è¾‘æ—¶ä¼šå½¢æˆæŠ½è±¡å±‚ç»„ä»¶çš„åµŒå¥—åœ°ç‹±ã€‚")]),t._v(" "),a("li",[a("code",[t._v("HOC")]),t._v("å’Œ"),a("code",[t._v("render props")]),t._v("éƒ½ä¼šæ”¹å˜åŸå…ˆçš„ç»„ä»¶ç»“æ„ï¼Œè€Œ"),a("code",[t._v("hooks")]),t._v("å¯ä»¥ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚")])])])])]),t._v(" "),a("li",[t._v("ç”Ÿå‘½å‘¨æœŸ\n"),a("ul",[a("li",[t._v("åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œå¹¶ä¸å­˜åœ¨ç”Ÿå‘½å‘¨æœŸï¼Œè¿™æ˜¯å› ä¸ºè¿™äº›ç”Ÿå‘½å‘¨æœŸé’©å­éƒ½æ¥è‡ªäºç»§æ‰¿çš„"),a("code",[t._v("React.Component")])])])]),t._v(" "),a("li",[t._v("è°ƒç”¨æ–¹å¼\n"),a("ul",[a("li",[t._v("å‡½æ•°ç»„ä»¶ï¼Œè°ƒç”¨åˆ™æ˜¯æ‰§è¡Œå‡½æ•°å³å¯")]),t._v(" "),a("li",[t._v("ç±»ç»„ä»¶ï¼Œåˆ™éœ€è¦å°†ç»„ä»¶è¿›è¡Œå®ä¾‹åŒ–ï¼Œç„¶åè°ƒç”¨å®ä¾‹å¯¹è±¡çš„"),a("code",[t._v("render")]),t._v("æ–¹æ³•")])])]),t._v(" "),a("li",[t._v("è·å–æ¸²æŸ“çš„å€¼\n"),a("ul",[a("li",[t._v("å‡½æ•°å¼ç»„ä»¶æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæœ‰ç‹¬ç«‹ "),a("code",[t._v("props/state")]),t._v(",è€Œç±»ç»„ä»¶æ€»æ˜¯ä¼šé€šè¿‡"),a("code",[t._v("this")]),t._v("æ‹¿åˆ°æœ€æ–°çš„"),a("code",[t._v("props/state")])])])])]),t._v(" "),a("h3",{attrs:{id:"è¯´è¯´å¯¹å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶çš„ç†è§£-åº”ç”¨åœºæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¯´è¯´å¯¹å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶çš„ç†è§£-åº”ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" è¯´è¯´å¯¹å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶çš„ç†è§£ï¼Ÿåº”ç”¨åœºæ™¯ï¼Ÿ")]),t._v(" "),a("ul",[a("li",[t._v("å—æ§ç»„ä»¶æˆ‘ä»¬ä¸€èˆ¬éœ€è¦åˆå§‹çŠ¶æ€å’Œä¸€ä¸ªçŠ¶æ€æ›´æ–°äº‹ä»¶å‡½æ•°")]),t._v(" "),a("li",[t._v("åˆå§‹åŒ–çš„æ—¶å€™æ¥å—å¤–éƒ¨æ•°æ®ï¼Œç„¶åè‡ªå·±åœ¨å†…éƒ¨å­˜å‚¨å…¶è‡ªèº«çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨"),a("code",[t._v("ref")]),t._v("æŸ¥è¯¢"),a("code",[t._v("DOM")]),t._v("å¹¶æŸ¥æ‰¾å…¶å½“å‰å€¼")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://static.vue-js.com/f28aed20-df2f-11eb-ab90-d9ae814b240d.png",alt:"ä½¿ç”¨åœºæ™¯"}})]),t._v(" "),a("h3",{attrs:{id:"react-routeråŸç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-routeråŸç†"}},[t._v("#")]),t._v(" React RouteråŸç†")]),t._v(" "),a("ol",[a("li",[t._v("hash\n"),a("ul",[a("li",[t._v("é€šè¿‡"),a("code",[t._v("window.location.hash")]),t._v("å±æ€§è·å–å’Œè®¾ç½®"),a("code",[t._v("hash")]),t._v("å€¼ã€‚")]),t._v(" "),a("li",[t._v("é€šè¿‡"),a("code",[t._v("onhashchange")]),t._v("ç›‘å¬è·¯ç”±")])])]),t._v(" "),a("li",[t._v("history\n"),a("ul",[a("li",[t._v("é€šè¿‡"),a("code",[t._v("history.pushState")]),t._v("æ”¹å˜è·¯ç”±ï¼ˆ"),a("code",[t._v("history.replaceState")]),t._v("è¿™ä¸ªæ–¹æ³•ä¼šä¿®æ”¹å½“å‰çš„"),a("code",[t._v("history")]),t._v("å¯¹è±¡è®°å½•ï¼Œ"),a("code",[t._v("history.length")]),t._v("çš„é•¿åº¦ä¸ä¼šæ”¹å˜ã€‚ï¼‰")]),t._v(" "),a("li",[t._v("é€šè¿‡"),a("code",[t._v("popstate")]),t._v("ç›‘å¬è·¯ç”±")])])])]),t._v(" "),a("h3",{attrs:{id:"react18-æ›´æ–°ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react18-æ›´æ–°ç‚¹"}},[t._v("#")]),t._v(" React18 æ›´æ–°ç‚¹")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("createRoot")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" React "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createRoot "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom/client'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" container "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" root "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRoot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è£…è½½")]),t._v("\nroot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("App tab"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"home"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¸è½½")]),t._v("\nroot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unmount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[a("code",[t._v("setState")]),t._v(" åŒæ­¥/å¼‚æ­¥")])]),t._v(" "),a("p",[a("strong",[a("code",[t._v("Promise")]),t._v(" "),a("code",[t._v("setTimeout")]),t._v(" ä»¥åŠåŸç”Ÿäº‹ä»¶è¿›è¡Œæ‰¹å¤„ç†")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFlag")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŒæ­¥æ¨¡å¼ï¼šä¼šæ‰§è¡Œä¸¤æ¬¡ render")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¹¶ä¸”åœ¨ setCount åï¼Œåœ¨ setFlag ä¹‹å‰èƒ½é€šè¿‡ Ref è·å–åˆ°æœ€æ–°çš„ count å€¼")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// React 18 åªä¼šæœ‰ä¸€æ¬¡ render")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFlag")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// React 18ï¼šä¼šæ‰§è¡Œä¸¤æ¬¡ render")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[a("strong",[a("code",[t._v("flushSync")]),t._v(" å–æ¶ˆæ‰¹å¤„ç†")])]),t._v(" "),a("p",[a("code",[t._v("flushSync")]),t._v(" ä¼šä»¥å‡½æ•°ä¸ºä½œç”¨åŸŸï¼Œå‡½æ•°å†…éƒ¨çš„å¤šä¸ª "),a("code",[t._v("setState")]),t._v(" ä»ç„¶ä¸ºæ‰¹é‡æ›´æ–°")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flushSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFlag")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setCount å’Œ setFlag ä¸ºæ‰¹é‡æ›´æ–°ï¼Œç»“æŸå")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFlag")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ­¤æ–¹æ³•ä¼šè§¦å‘ä¸¤æ¬¡ render")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("ç»„ä»¶è¿”å› "),a("code",[t._v("null")])]),t._v(" "),a("li",[a("code",[t._v("useSyncExternalStore")])]),t._v(" "),a("li",[a("code",[t._v("useInsertionEffect")])])]),t._v(" "),a("p",[a("code",[t._v("useInsertionEffect")]),t._v(" çš„å·¥ä½œåŸç†å¤§è‡´ "),a("code",[t._v("useLayoutEffect")]),t._v(" ç›¸åŒï¼Œåªæ˜¯æ­¤æ—¶æ— æ³•è®¿é—® "),a("code",[t._v("DOM")]),t._v(" èŠ‚ç‚¹çš„å¼•ç”¨")]),t._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[a("code",[t._v("Transition")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" startTransition "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç´§æ€¥ï¼šæ˜¾ç¤ºè¾“å…¥çš„å†…å®¹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInputValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ‡è®°å›è°ƒå‡½æ•°å†…çš„æ›´æ–°ä¸ºéç´§æ€¥æ›´æ–°")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSearchQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("ol",{attrs:{start:"7"}},[a("li",[a("code",[t._v("useDeferredValue")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useDeferredValue "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" deferredValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useDeferredValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[a("strong",[a("code",[t._v("useDeferredValue")]),t._v(" å’Œ "),a("code",[t._v("useTransition")]),t._v(" å¼‚åŒ")])]),t._v(" "),a("ul",[a("li",[t._v("ç›¸åŒï¼š"),a("code",[t._v("useDeferredValue")]),t._v(" æœ¬è´¨ä¸Šå’Œå†…éƒ¨å®ç°ä¸ "),a("code",[t._v("useTransition")]),t._v(" ä¸€æ ·éƒ½æ˜¯æ ‡è®°æˆäº†å»¶è¿Ÿæ›´æ–°ä»»åŠ¡ã€‚")]),t._v(" "),a("li",[t._v("ä¸åŒï¼š"),a("code",[t._v("useTransition")]),t._v(" æ˜¯æŠŠæ›´æ–°ä»»åŠ¡å˜æˆäº†å»¶è¿Ÿæ›´æ–°ä»»åŠ¡ï¼Œè€Œ "),a("code",[t._v("useDeferredValue")]),t._v(" æ˜¯äº§ç”Ÿä¸€ä¸ªæ–°çš„å€¼ï¼Œè¿™ä¸ªå€¼ä½œä¸ºå»¶æ—¶çŠ¶æ€ã€‚")])])])}),[],!1,null,null,null);s.default=e.exports}}]);