(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{470:function(s,t,a){"use strict";a.r(t);var e=a(0),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("img",{attrs:{src:"https://img2018.cnblogs.com/blog/1626845/201909/1626845-20190906155725405-2078840564.png",alt:"从URL输入到页面展现"}})]),s._v(" "),t("h2",{attrs:{id:"主要步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主要步骤"}},[s._v("#")]),s._v(" 主要步骤")]),s._v(" "),t("h3",{attrs:{id:"_1-根据地址栏输入的地址向dns-domain-name-system-域名系统-查询ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-根据地址栏输入的地址向dns-domain-name-system-域名系统-查询ip"}},[s._v("#")]),s._v(" 1. 根据地址栏输入的地址向DNS（Domain Name System 域名系统）查询IP")]),s._v(" "),t("p",[s._v("DNS解析是一个递归查询的过程（递归查询和迭代查询）")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/6/4/163c83c423b021ca?imageslim",alt:"DNS解析过程"}})]),s._v(" "),t("p",[s._v("查找顺序： 浏览器缓存--\x3e 操作系统缓存--\x3e 本地host文件 --\x3e 路由器缓存--\x3e ISP DNS缓存 --\x3e 顶级DNS服务器/根DNS服务器")]),s._v(" "),t("p",[s._v("本地DNS服务器向域名的解析服务器发出请求，这时就能收到一个域名和IP地址对应关系，本地DNS服务器不仅要把IP地址返回给用户电脑，还要把这个对应关系保存在缓存中，以备下次别的用户查询时，可以直接返回结果，加快网络访问")]),s._v(" "),t("p",[s._v("DNS负载均衡：DNS可以返回一个合适的机器的IP给用户，可以根据每台机器的负载量，该机器离用户地理位置的距离，这种过程就是DNS负载均衡，又叫做DNS重定向。大家耳熟能详的CDN(Content Delivery Network)就是利用DNS的重定向技术")]),s._v(" "),t("h3",{attrs:{id:"_2-建立tcp连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-建立tcp连接"}},[s._v("#")]),s._v(" 2. 建立TCP连接")]),s._v(" "),t("p",[s._v("浏览器通过操作OS的socket与服务器进行TCP连接 "),t("code",[s._v("三次握手过程")])]),s._v(" "),t("ol",[t("li",[t("code",[s._v("第一次握手")]),s._v(" 客户端发送网络包，服务端收到了；")])]),s._v(" "),t("blockquote",[t("p",[s._v("客户端的发送能力、服务端的接收能力是正常的。")])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("code",[s._v("第二次握手")]),s._v(" 服务端发包，客户端收到了；")])]),s._v(" "),t("blockquote",[t("p",[s._v("服务端的接收、发送能力，客户端的接收、发送能力是正常的。 从客户端的视角来看，我接到了服务端发送过来的响应数据包，说明服务端接收到了我在第一次握手时发送的网络包，并且成功发送了响应数据包，这就说明，服务端的接收、发送能力正常。而另一方面，我收到了服务端的响应数据包，说明我第一次发送的网络包成功到达服务端，这样，我自己的发送和接收能力也是正常的。")])]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[t("code",[s._v("第三次握手")]),s._v(" 客户端发包，服务端收到了；")])]),s._v(" "),t("blockquote",[t("p",[s._v("客户端的接收、发送能力，服务端的发送、接收能力是正常的。 第一、二次握手后，服务端并不知道客户端的接收能力以及自己的发送能力是否正常。而在第三次握手时，服务端收到了客户端对第二次握手作的回应。从服务端的角度，我在第二次握手时的响应数据发送出去了，客户端接收到了。所以，我的发送能力是正常的。而客户端的接收能力也是正常的。")])]),s._v(" "),t("h3",{attrs:{id:"_3-发送http请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-发送http请求"}},[s._v("#")]),s._v(" 3. 发送HTTP请求")]),s._v(" "),t("p",[s._v("请求是浏览器的一个优化点，我们可以通过缓存来减少不必要的请求，进而加快页面的呈现。通过简单地设置http头部可以使用缓存的功能。")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("Last-Modify(响应头) + If-Modified-Since（请求头）")])]),s._v(" "),t("li",[t("p",[s._v("ETag（响应头） + If-None-Match（请求头）")])]),s._v(" "),t("li",[t("p",[s._v("Cache-Control/Expires(响应头)")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("POST / HTTP1.1\nHost:www.wrox.com\nUser-Agent:Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022)\nContent-Type:application/x-www-form-urlencoded\nContent-Length:40\nConnection: Keep-Alive\n\nname=Professional%20Ajax&publisher=Wiley\n第一部分：请求行，第一行明了是post请求，以及http1.1版本。\n第二部分：请求头部，第二行至第六行。\n第三部分：空行，第七行的空行。\n第四部分：请求数据，第八行。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h3",{attrs:{id:"_4-服务器处理请求并响应-http-报文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-服务器处理请求并响应-http-报文"}},[s._v("#")]),s._v(" 4. 服务器处理请求并响应 HTTP 报文")]),s._v(" "),t("p",[s._v("HTTP响应报文也是由三部分组成: 状态码, 响应报头和响应报文。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1xx：指示信息–表示请求已接收，继续处理。\n\n2xx：成功–表示请求已被成功接收、理解、接受。\n\n3xx：重定向–要完成请求必须进行更进一步的操作。\n\n4xx：客户端错误–请求有语法错误或请求无法实现。\n\n5xx：服务器端错误–服务器未能实现合法的请求。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"_5-浏览器开始解析渲染页面并显示"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-浏览器开始解析渲染页面并显示"}},[s._v("#")]),s._v(" 5. 浏览器开始解析渲染页面并显示")]),s._v(" "),t("p",[s._v("通过HTML解析器解析HTML文档，构建一个DOM Tree，同时通过CSS解析器解析HTML中存在的CSS，构建Style Rules，两者结合形成一个Attachment。\n通过Attachment构造出一个呈现树（Render Tree）\nRender Tree构建完毕，进入到布局阶段（layout/reflow），将会为每个阶段分配一个应出现在屏幕上的确切坐标。\n最后将全部的节点遍历绘制出来后，一个页面就展现出来了。")]),s._v(" "),t("h3",{attrs:{id:"_6-关闭连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-关闭连接"}},[s._v("#")]),s._v(" 6. 关闭连接")]),s._v(" "),t("p",[s._v("现在的页面为了优化请求的耗时，默认都会开启持久连接（keep-alive），那么一个TCP连接确切关闭的时机，是这个tab标签页关闭的时候。这个关闭的过程就是著名的四次挥手。")])])}),[],!1,null,null,null);t.default=n.exports}}]);