# 输入URL发生了什么

![从URL输入到页面展现](https://img2018.cnblogs.com/blog/1626845/201909/1626845-20190906155725405-2078840564.png)

## 主要步骤

### 1. 根据地址栏输入的地址向DNS（Domain Name System 域名系统）查询IP

DNS解析是一个递归查询的过程（递归查询和迭代查询）

![DNS解析过程](https://user-gold-cdn.xitu.io/2018/6/4/163c83c423b021ca?imageslim)

查找顺序： 浏览器缓存--> 操作系统缓存--> 本地host文件 --> 路由器缓存--> ISP DNS缓存 --> 顶级DNS服务器/根DNS服务器

本地DNS服务器向域名的解析服务器发出请求，这时就能收到一个域名和IP地址对应关系，本地DNS服务器不仅要把IP地址返回给用户电脑，还要把这个对应关系保存在缓存中，以备下次别的用户查询时，可以直接返回结果，加快网络访问

DNS负载均衡：DNS可以返回一个合适的机器的IP给用户，可以根据每台机器的负载量，该机器离用户地理位置的距离，这种过程就是DNS负载均衡，又叫做DNS重定向。大家耳熟能详的CDN(Content Delivery Network)就是利用DNS的重定向技术

### 2. 向服务器发起请求 `TCP 连接：TCP 三次握手`

3. 服务器返回请求内容 `发送 HTTP 请求`

4. 服务器处理请求并响应 HTTP 报文

5. 浏览器开始解析渲染页面并显示

6. 关闭连接 `TCP 四次挥手`
