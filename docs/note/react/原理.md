# åŸç†

## å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰

æŒæ¡ React åŸç†ä¹‹å‰ï¼Œä¸å¾—ä¸å…ˆäº†è§£ä¸‹å‡½æ•°å¼ç¼–ç¨‹ã€‚

![å‡½æ•°å¼ç¼–ç¨‹](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8e314b125aa6451b978bbf4fdc1dd58b~tplv-k3u1fbpfcp-zoom-1.image)

### ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ

#### ä¸¾ä¸ªğŸŒ°

```js
// å‘½ä»¤å¼
const fruitsName = [];
for (let i = 0; i < fruits.length; i++) {
  fruitsName.push(fruits[i].name);
}

// å£°æ˜å¼
const fruits = cars.map(fruit => fruit.name);
```

#### ä¸ºä»€ä¹ˆå«å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ

æ•°æ®å¯ä»¥ä¸æ–­çš„ä»ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºå¯ä»¥æµå…¥å¦ä¸€ä¸ªå‡½æ•°è¾“å…¥ï¼Œå®ƒå…¶å®å°±æ˜¯å¼ºè°ƒåœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­æŠŠæ›´å¤šçš„å…³æ³¨ç‚¹æ”¾åœ¨å¦‚ä½•å»æ„å»ºå…³ç³»ã€‚é€šè¿‡æ„å»ºä¸€æ¡é«˜æ•ˆçš„å»ºæµæ°´çº¿ï¼Œä¸€æ¬¡è§£å†³æ‰€æœ‰é—®é¢˜ã€‚è€Œä¸æ˜¯æŠŠç²¾åŠ›åˆ†æ•£åœ¨ä¸åŒçš„åŠ å·¥å‚ä¸­æ¥å›å¥”æ³¢ä¼ é€’æ•°æ®ã€‚

#### ç‰¹ç‚¹

##### ä¸€ç­‰å…¬æ°‘

è¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹å¾—ä»¥å®ç°çš„å‰æï¼šå‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ã€‚

##### å£°æ˜å¼ç¼–ç¨‹

å£°æ˜æˆ‘éœ€è¦åšä»€ä¹ˆï¼Œè€Œéæ€ä¹ˆå»åš

##### æƒ°æ€§æ‰§è¡Œ

å‡½æ•°åªåœ¨éœ€è¦çš„æ—¶å€™æ‰§è¡Œï¼Œå³ä¸äº§ç”Ÿæ— æ„ä¹‰çš„ä¸­é—´å˜é‡

##### æ— çŠ¶æ€å’Œæ•°æ®ä¸å¯å˜

è¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µ

* **æ•°æ®ä¸å¯å˜**ï¼š å®ƒè¦æ±‚ä½ æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ æƒ³ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä½ åº”è¯¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ç”¨æ¥ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å·²æœ‰çš„å¯¹è±¡ã€‚
* **æ— çŠ¶æ€**ï¼š ä¸»è¦æ˜¯å¼ºè°ƒå¯¹äºä¸€ä¸ªå‡½æ•°ï¼Œä¸ç®¡ä½ ä½•æ—¶è¿è¡Œï¼Œå®ƒéƒ½åº”è¯¥åƒç¬¬ä¸€æ¬¡è¿è¡Œä¸€æ ·ï¼Œç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œç»™å‡ºç›¸åŒçš„è¾“å‡ºï¼Œå®Œå…¨ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€çš„å˜åŒ–ã€‚

![å‡½æ•°å¼ç¼–ç¨‹åº”å…·å¤‡çš„ç‰¹æ€§](https://user-gold-cdn.xitu.io/2019/9/5/16d00f438daa6474?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

##### æ²¡æœ‰å‰¯ä½œç”¨

æˆ‘ä»¬å‡½æ•°ä¸­æœ€ä¸»è¦çš„åŠŸèƒ½å½“ç„¶æ˜¯æ ¹æ®è¾“å…¥**è¿”å›ç»“æœ**ï¼Œè€Œåœ¨å‡½æ•°ä¸­æˆ‘ä»¬æœ€å¸¸è§çš„å‰¯ä½œç”¨å°±æ˜¯**éšæ„æ“çºµå¤–éƒ¨å˜é‡**

è¿™é‡Œå¯ä»¥ä¸¾ä¸ªğŸŒ°ï¼ˆäº²çœ¼è§è¿‡...ï¼‰

```js
const data = [];
values.map(value => {
  data.push(value.label);
});
```

è¿™æ ·å‡½æ•°æœ€ä¸»è¦çš„è¾“å‡ºåŠŸèƒ½æ²¡æœ‰äº†ï¼Œå˜æˆäº†ç›´æ¥ä¿®æ”¹äº†å¤–éƒ¨å˜é‡ï¼Œè¿™å°±æ˜¯å®ƒçš„å‰¯ä½œç”¨ã€‚è€Œæ²¡æœ‰å‰¯ä½œç”¨çš„å†™æ³•åº”è¯¥æ˜¯ï¼š

```js
const data = values.map(value => value.label);
```

> ä¼ é€’å¼•ç”¨ä¸€æ—¶çˆ½ï¼Œä»£ç é‡æ„ç«è‘¬åœº
> 
> ä¿è¯å‡½æ•°æ²¡æœ‰å‰¯ä½œç”¨ï¼Œä¸€æ¥èƒ½ä¿è¯æ•°æ®çš„ä¸å¯å˜æ€§ï¼ŒäºŒæ¥èƒ½é¿å…å¾ˆå¤šå› ä¸ºå…±äº«çŠ¶æ€å¸¦æ¥çš„é—®é¢˜ã€‚å½“ä½ ä¸€ä¸ªäººç»´æŠ¤ä»£ç æ—¶å€™å¯èƒ½è¿˜ä¸æ˜æ˜¾ï¼Œä½†éšç€é¡¹ç›®çš„è¿­ä»£ï¼Œé¡¹ç›®å‚ä¸äººæ•°å¢åŠ ï¼Œå¤§å®¶å¯¹åŒä¸€å˜é‡çš„ä¾èµ–å’Œå¼•ç”¨è¶Šæ¥è¶Šå¤šï¼Œè¿™ç§é—®é¢˜ä¼šè¶Šæ¥è¶Šä¸¥é‡ã€‚æœ€ç»ˆå¯èƒ½è¿ç»´æŠ¤è€…è‡ªå·±éƒ½ä¸æ¸…æ¥šå˜é‡åˆ°åº•æ˜¯åœ¨å“ªé‡Œè¢«æ”¹å˜è€Œäº§ç”Ÿ Bugã€‚
  
##### çº¯å‡½æ•°ï¼ˆpure functionsï¼‰

çº¯å‡½æ•°çš„æ¦‚å¿µï¼š

* **ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€ï¼ˆæ— çŠ¶æ€ï¼‰**ï¼š å‡½æ•°çš„çš„è¿è¡Œç»“æœä¸ä¾èµ–å…¨å±€å˜é‡ï¼Œ`this` æŒ‡é’ˆï¼Œ`IO` æ“ä½œç­‰ã€‚

* **æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆæ•°æ®ä¸å˜ï¼‰**ï¼š ä¸ä¿®æ”¹å…¨å±€å˜é‡ï¼Œä¸ä¿®æ”¹å…¥å‚ã€‚

çº¯å‡½æ•°çš„æ„ä¹‰ï¼š

* ä¾¿äºæµ‹è¯•å’Œä¼˜åŒ–ï¼šä¿è¯å¥å£®æ€§

* å¯ç¼“å­˜æ€§ï¼šç›¸åŒçš„è¾“å…¥æ€»æ˜¯å¯ä»¥è¿”å›ç›¸åŒçš„è¾“å‡ºã€‚ç±»ä¼¼äº `memoize` å‡½æ•°

* è‡ªæ–‡æ¡£åŒ–ï¼šä¾èµ–å¾ˆæ˜ç¡®ï¼Œæ›´æ˜“äºè§‚å¯Ÿå’Œç†è§£

* æ›´å°‘çš„ Bugï¼šä¸å­˜åœ¨æŒ‡å‘ä¸æ˜çš„ thisï¼Œä¸å­˜åœ¨å¯¹å…¨å±€å˜é‡çš„å¼•ç”¨ï¼Œä¸å­˜åœ¨å¯¹å‚æ•°çš„ä¿®æ”¹

### æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰å’Œå‡½æ•°ç»„åˆï¼ˆComposeï¼‰

#### æŸ¯é‡ŒåŒ– 

ğŸ‘‡

`
f(a,b,c) â†’ f(a)(b)(c)
`

å®¹æ˜“è·Ÿ **éƒ¨åˆ†å‡½æ•°åº”ç”¨** æ··æ·†

```
// æŸ¯é‡ŒåŒ–
f(a,b,c) â†’ f(a)(b)(c)
// éƒ¨åˆ†å‡½æ•°è°ƒç”¨
f(a,b,c) â†’ f(a)(b,c) / f(a,b)(c)
```

`lodash` `Ramda` è¿™äº›åº“é‡Œçš„curryæ˜¯**é«˜çº§æŸ¯é‡ŒåŒ–**

#### å‡½æ•°ç»„åˆ

```js
const compose = (f, g) => x => f(g(x))

const f = x => x + 1;
const g = x => x * 2;
const fg = compose(f, g);
fg(1) //3
```

æ¨¡æ‹Ÿä¸€ä¸ªç®€åŒ–ç‰ˆ `compose`

<<< @/docs/note/react/utils/compose.js

### æ€»ç»“

ä¼˜ç‚¹

* ä»£ç ç®€æ´ï¼Œå¼€å‘å¿«é€Ÿ
`
å‡½æ•°å¼ç¼–ç¨‹å¤§é‡ä½¿ç”¨å‡½æ•°çš„ç»„åˆï¼Œå‡½æ•°çš„å¤ç”¨ç‡å¾ˆé«˜ï¼Œå‡å°‘äº†ä»£ç çš„é‡å¤ï¼Œå› æ­¤ç¨‹åºæ¯”è¾ƒçŸ­ï¼Œå¼€å‘é€Ÿåº¦è¾ƒå¿«ã€‚
`

* æ¥è¿‘è‡ªç„¶è¯­è¨€ï¼Œæ˜“äºç†è§£
`
å‡½æ•°å¼ç¼–ç¨‹å¤§é‡ä½¿ç”¨å£°æ˜å¼ä»£ç ï¼ŒåŸºæœ¬éƒ½æ˜¯æ¥è¿‘è‡ªç„¶è¯­è¨€çš„ï¼ŒåŠ ä¸Šå®ƒæ²¡æœ‰ä¹±ä¸ƒå…«ç³Ÿçš„å¾ªç¯ï¼Œåˆ¤æ–­çš„åµŒå¥—ã€‚
`
* æ˜“äº"å¹¶å‘ç¼–ç¨‹"
`
å‡½æ•°å¼ç¼–ç¨‹æ²¡æœ‰å‰¯ä½œç”¨
`

* æ›´å°‘çš„å‡ºé”™æ¦‚ç‡
`
å› ä¸ºæ¯ä¸ªå‡½æ•°éƒ½å¾ˆå°ï¼Œè€Œä¸”ç›¸åŒè¾“å…¥æ°¸è¿œå¯ä»¥å¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œå› æ­¤æµ‹è¯•å¾ˆç®€å•ï¼ŒåŒæ—¶å‡½æ•°å¼ç¼–ç¨‹å¼ºè°ƒä½¿ç”¨çº¯å‡½æ•°ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ï¼Œå› æ­¤ä¹Ÿå¾ˆå°‘å‡ºç°å¥‡æ€ªçš„ Bugã€‚
`

ç¼ºç‚¹

* æ€§èƒ½
`
å‡½æ•°å¼ç¼–ç¨‹ç›¸å¯¹äºæŒ‡ä»¤å¼ç¼–ç¨‹ï¼Œæ€§èƒ½ç»å¯¹æ˜¯ä¸€ä¸ªçŸ­æ¿ï¼Œå› ä¸ºå®ƒå¾€å¾€ä¼šå¯¹ä¸€ä¸ªæ–¹æ³•è¿›è¡Œè¿‡åº¦åŒ…è£…ï¼Œä»è€Œäº§ç”Ÿä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ€§èƒ½å¼€é”€ã€‚åŒæ—¶ï¼Œåœ¨ JS è¿™ç§éå‡½æ•°å¼è¯­è¨€ä¸­ï¼Œå‡½æ•°å¼çš„æ–¹å¼å¿…ç„¶ä¼šæ¯”ç›´æ¥å†™è¯­å¥æŒ‡ä»¤æ…¢ï¼ˆå¼•æ“ä¼šé’ˆå¯¹å¾ˆå¤šæŒ‡ä»¤åšç‰¹åˆ«ä¼˜åŒ–ï¼‰ã€‚å°±æ‹¿åŸç”Ÿæ–¹æ³• map æ¥è¯´ï¼Œå®ƒå°±è¦æ¯”çº¯å¾ªç¯è¯­å¥å®ç°è¿­ä»£æ…¢ 8 å€ã€‚
`

* èµ„æºå ç”¨
`
åœ¨ JS ä¸­ä¸ºäº†å®ç°å¯¹è±¡çŠ¶æ€çš„ä¸å¯å˜ï¼Œå¾€å¾€ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œå› æ­¤ï¼Œå®ƒå¯¹åƒåœ¾å›æ”¶æ‰€äº§ç”Ÿçš„å‹åŠ›è¿œè¿œè¶…è¿‡å…¶ä»–ç¼–ç¨‹æ–¹å¼ã€‚è¿™åœ¨æŸäº›åœºåˆä¼šäº§ç”Ÿååˆ†ä¸¥é‡çš„é—®é¢˜ã€‚
`

* é€’å½’é™·é˜±
`
åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œä¸ºäº†å®ç°è¿­ä»£ï¼Œé€šå¸¸ä¼šé‡‡ç”¨é€’å½’æ“ä½œï¼Œä¸ºäº†å‡å°‘é€’å½’çš„æ€§èƒ½å¼€é”€ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šæŠŠé€’å½’å†™æˆå°¾é€’å½’å½¢å¼ï¼Œä»¥ä¾¿è®©è§£æå™¨è¿›è¡Œä¼˜åŒ–ã€‚ä½†æ˜¯ä¼—æ‰€å‘¨çŸ¥ï¼ŒJS æ˜¯ä¸æ”¯æŒå°¾é€’å½’ä¼˜åŒ–çš„ï¼ˆè™½ç„¶ ES6 ä¸­å°†å°¾é€’å½’ä¼˜åŒ–ä½œä¸ºäº†ä¸€ä¸ªè§„èŒƒï¼Œä½†æ˜¯çœŸæ­£å®ç°çš„å°‘ä¹‹åˆå°‘ï¼‰
`

### å‚è€ƒæ–‡ç« 

[ç®€æ˜ JavaScript å‡½æ•°å¼ç¼–ç¨‹â€”â€”å…¥é—¨ç¯‡](https://juejin.im/post/6844903936378273799#heading-0)
