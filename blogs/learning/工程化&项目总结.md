---
title: 工程化
date: 2021-03-23
categories:
  - 工程化
---

# 工程化

**1. Babel 是如何编译 Async 和 Generator 的**

[戳这里](https://libin1991.github.io/2020/02/26/Babel%E6%98%AF%E5%A6%82%E4%BD%95%E7%BC%96%E8%AF%91Async%E5%92%8CGenerator%E7%9A%84/)

# 安全问题

XSS...

# 性能相关

## 如何减少白屏时间&优化

**从大方向出发**

```
加速或减少HTTP请求损耗：使用CDN加载公用库，使用强缓存和协商缓存，使用域名收敛，小图片使用Base64代替，使用Get请求代替Post请求，设置 Access-Control-Max-Age 减少预检请求，页面内跳转其他域名或请求其他域名的资源时使用浏览器prefetch预解析等；

浏览器渲染原理：优化关键渲染路径，尽可能减少阻塞渲染的JS、CSS

减少请求内容的体积：压缩、SSR

延迟加载：非重要的库、非首屏图片延迟加载，路由和组件懒加载等；

优化用户等待体验：白屏使用加载进度条、loading图、骨架屏代替等
```

**从技术角度出发**

```
HTML + CSS 优化
1. 压缩体积
2. css 放在 head 进行加载

JavaScript优化（js 的解析线程是和 ui 渲染的线程公用）
1. 压缩JS文件，放到 html 底部
2. 巧用 script 的 defer 和 async 属性

资源加载优化
1. 利用 webpack 进行拆分，利用浏览器提供的并发加载来加速资源的加载速度。
2. 利用 webpack 的异步加载或者利用框架自带的一些工具进行组件抽离，尽可能减少首屏加载时的业务代码体积。
3. 图片使用懒加载的形式
4. 可以使用 preload 对本页资源进行预加载，例如字体文件，可以让css使用的字体可以提前进行加载
5. 可以使用 prefetch 对之后其他页面可能用到的资源进行预加载。优先级会比preload低。
6. DNS 预解析 dns-prefetch，对一些常用的域名进行预解析，提高dns的速度。

网络优化
1. 静态资源上 cdn
2. 启用 http2.0，使用多路复用，提高并发请求中的 tcp 重复握手问题。
3. 对资源按需处理过期时间，对于长久的资源使用超长过期时间，并通过 webpack 构建出带有文件 md5 的文件名，对文件进行强制更新

运行优化
1. 慎用定时器
2. 虚拟滚动，长列表优化
3. 图片按需加载
4. 事件委托
5. 减少阻塞线程操作，例如数据量大的循环，频繁的事件响应（节流，防抖）
```
