---
title: é˜²æŠ– && èŠ‚æµ
date: 2020-11-06
categories:
 - JS
---

> è¿™äº›å·¥å…·å‡½æ•°è¿˜æ˜¯æŽ¨è `lodash` åº“çš„ ðŸ‘‰ [throttle](https://lodash.com/docs/4.17.15#throttle) [debounce](https://lodash.com/docs/4.17.15#debounce)

## é˜²æŠ–

### ä½¿ç”¨åœºæ™¯

- searchæœç´¢è”æƒ³ï¼Œç”¨æˆ·åœ¨ä¸æ–­è¾“å…¥å€¼æ—¶ï¼Œç”¨é˜²æŠ–æ¥èŠ‚çº¦è¯·æ±‚èµ„æºã€‚
- windowè§¦å‘resizeçš„æ—¶å€™ï¼Œä¸æ–­çš„è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°ä¼šä¸æ–­çš„è§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œç”¨é˜²æŠ–æ¥è®©å…¶åªè§¦å‘ä¸€æ¬¡

### ç®€æ˜“å®žçŽ°

```js
function debounce(fn, wait) {
	let timeout = null;

	return function () {
		const context = this;
		const args = arguments;

		if(timeout) clearTimeout(timeout);
		timeout = setTimeout(function () {
			fn.apply(context, args)
		}, wait);
	}
}
```

## èŠ‚æµ

### ä½¿ç”¨åœºæ™¯

- é¼ æ ‡ä¸æ–­ç‚¹å‡»è§¦å‘ï¼Œmousedown(å•ä½æ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡)
- ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ¯”å¦‚æ˜¯å¦æ»‘åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤šï¼Œç”¨throttleæ¥åˆ¤æ–­

### ç®€æ˜“å®žçŽ°

```js
// å®šæ—¶å™¨ç‰ˆæœ¬
function throttle(func, wait) {
	var timeout;

	return function() {
		const context = this;
		const args = arguments;
		if (!timeout) {
			timeout = setTimeout(function(){
				timeout = null;
				func.apply(context, args)
			}, wait)
		}

	}
}

// æ—¶é—´æˆ³ ç«‹å³æ‰§è¡Œç‰ˆæœ¬
function throttle(func, wait) {
	let context, args;
	let previous = 0;

	return function() {
		const now = +new Date();
		context = this;
		args = arguments;
		if (now - previous > wait) {
			func.apply(context, args);
			previous = now;
		}
	}
}
```
